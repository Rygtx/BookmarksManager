# Bookmarks Manager – 功能概览

本说明聚焦于当前版本提供的用户功能与使用体验，供后续重写时作为需求对照表。实现方式可以自由调整，只需满足下列行为与结果。

---

## 1. 主要用途
- 导入左右两套浏览器书签数据，进行对比、整理与同步。
- 快速发现两侧差异并辅助定位、维护缺失或重复的书签。
- 提供基本的书签管理操作（新增、编辑、删除、拖拽复制、复制粘贴）。

---

## 2. 界面角色
- **搜索面板**：实时筛选书签，展示结果并支持一键定位。
- **左右书签树**：各自展示一份完整书签层级，供比对与操作。
- **差异统计与列表**：汇总新增、删除、修改、重复数量，支持跳转。
- **操作浮层**：包括右键菜单、弹出提示、幽灵占位等辅助元素。

---

## 3. 功能清单

### 3.1 数据导入与展示
- 支持加载常见浏览器导出的 HTML/JSON 书签备份。
- 导入后立即渲染为树形结构，可展开/折叠查看层级。
- 双侧都导入时自动进入差异对比模式。

### 3.2 差异识别与提示
- 识别左右两侧的新增、删除、修改、重复条目，并在列表与树中提示。
- 以颜色或标签区分差异类型，确保在视觉上可快速识别。
- 对缺失的书签在另一侧显示半透明占位提示，指明缺失方向。

### 3.3 定位与导航
- 差异列表、统计卡片、搜索结果均支持点击定位树中目标。
- 提供“上一处/下一处差异”按钮，用于快速浏览所有差异。
- 右键菜单的“跳转到另一侧”功能可尝试找到另一侧的对应位置或相对位置。

### 3.4 搜索与过滤
- 搜索框根据关键字实时过滤标题和 URL。
- 搜索结果展示书签基本信息，点击后会展开树并选中对应书签。

### 3.5 书签管理操作
- 右键菜单/快捷键支持复制、粘贴、编辑、删除、以及新建文件夹。
- 拖拽可以将书签从一侧复制到另一侧或在同侧重新排序。
- 编辑书签时可修改标题和 URL，并在完成后更新显示。

### 3.6 视觉与反馈
- 差异高亮、占位提示、Toast 等即时反馈明确说明系统状态。
- 选中项、可拖拽项、高亮项之间在视觉上保持区别。
- 用户关键操作（导入、粘贴、删除、跳转）完成时给出明确反馈。

### 3.7 状态保持
- 在浏览器会话中记住用户上次导入的数据和差异模式。
- 刷新页面后可自动恢复书签树与差异标记，减少重复导入成本。

---

## 4. 用户典型流程

1. **导入与比对**
   - 用户分别导入左右书签文件。
   - 系统显示两棵树，自动统计差异并更新计数。

2. **浏览差异**
   - 用户查看差异列表或统计面板，点击任何一项即可滚动并高亮对应节点。
   - 对缺失项，另一侧出现幽灵占位帮助用户理解实际差距。

3. **维护书签**
   - 用户通过右键菜单或拖拽方式，将条目复制到另一侧、整理层级结构。
   - 可随时编辑或删除无用书签，树结构即时更新。

4. **搜索与跳转**
   - 输入关键词后，实时得到匹配项。
   - 点击搜索结果即可快速展开所在目录并选中该书签。

5. **会话延续**
   - 用户关闭或刷新页面后再次进入，可恢复上次导入的树与差异状态，继续处理。

---

## 5. 后续重写注意
- 实现细节可替换为更合适的技术方案，只需维持上述功能与交互体验。
- 可考虑优化性能、模块拆分、测试覆盖以及国际化等方向，但不应削弱既有能力。
- 本文档可作为测试用例或验收标准的基础，确保重构后行为一致。
